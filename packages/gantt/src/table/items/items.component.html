<table>
  <tbody>
    <ng-container *ngFor="let row of items">
      <ng-template [ngTemplateOutlet]="trTemplate" [ngTemplateOutletContext]="{ row: row }"></ng-template>
    </ng-container>
  </tbody>
</table>

<ng-template #trTemplate let-row="row">
  <tr>
    <td *ngFor="let column of columns">
      <div [class.text-truncate]="true">
        <ng-template
          [ngTemplateOutlet]="tdTemplate"
          [ngTemplateOutletContext]="{
            column: column,
            row: row.origin
          }"
        ></ng-template>
      </div>
    </td>
  </tr>
</ng-template>

<ng-template #tdTemplate let-column="column" let-row="row">
  <ng-template
    [ngTemplateOutlet]="column.templateRef"
    [ngTemplateOutletContext]="{ $implicit: row, row: row.origin }"
  ></ng-template>
</ng-template>
