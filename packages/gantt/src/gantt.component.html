<ngx-gantt-root #ganttRoot>
  <div class="gantt-header">
    <gantt-table-header #tableHeader [columns]="columns"></gantt-table-header>
    <div class="gantt-container-header">
      <gantt-calendar-header></gantt-calendar-header>
    </div>
  </div>

  <cdk-virtual-scroll-viewport
    class="gantt-virtual-scroll-viewport"
    [itemSize]="styles.lineHeight"
    [minBufferPx]="styles.lineHeight * 10"
    [maxBufferPx]="styles.lineHeight * 20"
  >
    <ng-container *cdkVirtualFor="let item of flatData; trackBy: trackBy"></ng-container>
    <div class="gantt-side" [style.width.px]="tableHeader.tableWidth + 1">
      <div class="gantt-side-container">
        <div class="gantt-table">
          <gantt-table-body
            [flatData]="flatData"
            [renderData]="renderData"
            [columns]="columns"
            [groupTemplate]="groupTemplate"
            [emptyTemplate]="tableEmptyTemplate"
            [rowBeforeTemplate]="table?.rowBeforeTemplate"
            [rowAfterTemplate]="table?.rowAfterTemplate"
            [draggable]="table.draggable"
            [dropEnterPredicate]="table.dropEnterPredicate"
            (dragDropped)="table.dragDropped.emit($event)"
            (itemClick)="selectItem($event)"
          ></gantt-table-body>
        </div>
      </div>
    </div>
    <div class="gantt-container">
      <gantt-calendar-grid></gantt-calendar-grid>
      <div class="gantt-main">
        <gantt-main
          [flatData]="flatData"
          [renderData]="renderData"
          [groupHeaderTemplate]="groupHeaderTemplate"
          [itemTemplate]="itemTemplate"
          [barTemplate]="barTemplate"
          [rangeTemplate]="rangeTemplate"
          (barClick)="barClick.emit($event)"
          (lineClick)="lineClick.emit($event)"
        >
        </gantt-main>
      </div>
    </div>
  </cdk-virtual-scroll-viewport>
  <gantt-drag-backdrop [style.left.px]="tableHeader.tableWidth + 1"></gantt-drag-backdrop>
</ngx-gantt-root>
