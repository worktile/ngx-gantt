<div class="gantt-calendar-today-overlay" *ngIf="ganttUpper.showTodayLine">
  <svg [attr.width]="view.width" height="1">
    <g>
      <line class="today-line"></line>
    </g>
  </svg>
</div>
<svg class="gantt-calendar-overlay-main" [attr.width]="view.width" [attr.height]="headerHeight">
  <g>
    <text class="primary-text" *ngFor="let point of view.primaryDatePoints; trackBy: trackBy" [attr.x]="point.x" [attr.y]="point.y">
      {{ point.text }}
    </text>
    <ng-container *ngFor="let point of view.secondaryDatePoints; trackBy: trackBy">
      <rect
        *ngIf="point.additions?.isToday"
        class="today-rect"
        [attr.x]="point.x - todayWidth / 2"
        [attr.y]="point.y - todayWidth / 2"
        [attr.rx]="todayBorderRadius"
        [attr.ry]="todayBorderRadius"
        [attr.width]="todayWidth"
        [attr.height]="todayHeight"
      ></rect>
      <text
        class="secondary-text"
        [class.secondary-text-weekend]="point.additions?.isWeekend"
        [class.secondary-text-today]="point.additions?.isToday"
        [attr.x]="point.x"
        [attr.y]="point.y"
      >
        {{ point.text }}
      </text>
    </ng-container>

    <g>
      <line
        *ngFor="let point of view.primaryDatePoints; let i = index; trackBy: trackBy"
        [attr.x1]="(i + 1) * view.primaryWidth"
        [attr.x2]="(i + 1) * view.primaryWidth"
        [attr.y1]="0"
        [attr.y2]="mainHeight"
        class="primary-line"
      ></line>
    </g>

    <g>
      <line [attr.x1]="0" [attr.x2]="view.width" [attr.y1]="headerHeight" [attr.y2]="headerHeight" class="header-line"></line>
    </g>
  </g>
  <g>
    <g *ngIf="view.showTimeline">
      <line
        *ngFor="let point of view.secondaryDatePoints; let i = index; trackBy: trackBy"
        [attr.x1]="(i + 1) * view.cellWidth"
        [attr.x2]="(i + 1) * view.cellWidth"
        [attr.y1]="headerHeight"
        [attr.y2]="mainHeight"
        class="secondary-line"
      ></line>
      <line
        *ngFor="let point of view.primaryDatePoints; let i = index; trackBy: trackBy"
        [attr.x1]="(i + 1) * view.primaryWidth"
        [attr.x2]="(i + 1) * view.primaryWidth"
        [attr.y1]="0"
        [attr.y2]="mainHeight"
        class="primary-line"
      ></line>
    </g>
  </g>
</svg>
