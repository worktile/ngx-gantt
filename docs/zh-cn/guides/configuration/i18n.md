---
title: 国际化
path: 'i18n'
order: 420
---

ngx-gantt 内置支持 6 种语言包，也支持自定义语言包扩展。

## 内置语言包

ngx-gantt 内置以下语言包：

| 语言     | 标识符              | 说明     |
| -------- | ------------------- | -------- |
| 简体中文 | `zh-hans` / `zh-cn` | 默认语言 |
| 繁体中文 | `zh-hant` / `zh-tw` | 繁体中文 |
| 英文     | `en-us`             | English  |
| 日文     | `ja-jp`             | 日本語   |
| 德文     | `de-de`             | Deutsch  |
| 俄文     | `ru-ru`             | Русский  |

### 使用内置语言

通过全局配置设置语言：

```typescript
import { bootstrapApplication } from '@angular/platform-browser';
import { GANTT_GLOBAL_CONFIG, GanttI18nLocale } from '@worktile/gantt';
import { AppComponent } from './app/app.component';

bootstrapApplication(AppComponent, {
  providers: [
    {
      provide: GANTT_GLOBAL_CONFIG,
      useValue: {
        locale: GanttI18nLocale.enUs // 或 'en-us'
      }
    }
  ]
}).catch((err) => console.error(err));
```

## 自定义语言包

### 注册自定义语言包

以法语（fr-fr）为例，创建自定义语言包：

**注意：** `tickFormats` 中的格式字符串完全依赖 `date-fns` 的 `format` 函数，格式规则需遵循 [date-fns format 规范](https://date-fns.org/docs/format)。

```typescript
import { GanttI18nLocaleConfig, GanttViewType } from '@worktile/gantt';
import { fr } from 'date-fns/locale';

const frenchLocale: GanttI18nLocaleConfig = {
  id: 'fr-fr',
  dateLocale: fr, // date-fns 的 locale
  views: {
    [GanttViewType.hour]: {
      label: 'Vue horaire',
      tickFormats: {
        period: 'd MMM',
        unit: 'HH:mm'
      }
    },
    [GanttViewType.day]: {
      label: 'Vue journalière',
      tickFormats: {
        period: 'MMMM yyyy',
        unit: 'd'
      }
    },
    [GanttViewType.week]: {
      label: 'Vue hebdomadaire',
      tickFormats: {
        period: 'yyyy',
        unit: 'Semaine w'
      }
    },
    [GanttViewType.month]: {
      label: 'Vue mensuelle',
      tickFormats: {
        period: 'yyyy',
        unit: 'MMM'
      }
    },
    [GanttViewType.quarter]: {
      label: 'Vue trimestrielle',
      tickFormats: {
        period: 'yyyy',
        unit: 'T Q'
      }
    },
    [GanttViewType.year]: {
      label: 'Vue annuelle',
      tickFormats: {
        unit: 'yyyy'
      }
    }
  }
};
```

使用 `GANTT_I18N_LOCALE_TOKEN` 注册：

```typescript
import { bootstrapApplication } from '@angular/platform-browser';
import { GANTT_I18N_LOCALE_TOKEN, GANTT_GLOBAL_CONFIG, GanttI18nLocaleConfig } from '@worktile/gantt';
import { AppComponent } from './app/app.component';

bootstrapApplication(AppComponent, {
  providers: [
    {
      provide: GANTT_I18N_LOCALE_TOKEN,
      useValue: frenchLocale,
      multi: true
    },
    {
      provide: GANTT_GLOBAL_CONFIG,
      useValue: {
        locale: 'fr-fr' // 使用自定义语言包 ID
      }
    }
  ]
}).catch((err) => console.error(err));
```

### 覆盖内置语言包

使用相同的 ID 可以覆盖内置语言包

```typescript
import { GanttI18nLocaleConfig, GanttI18nLocale, GanttViewType, zhHansLocale } from '@worktile/gantt';

const customZhHans: GanttI18nLocaleConfig = {
  id: GanttI18nLocale.zhHans, // 使用内置 ID
  views: {
    [GanttViewType.day]: {
      label: '天',
      tickFormats: {
        period: 'yyyy-MM',
        unit: 'dd'
      }
    },
    ...
  }
};

import { bootstrapApplication } from '@angular/platform-browser';
import { GANTT_I18N_LOCALE_TOKEN } from '@worktile/gantt';
import { AppComponent } from './app/app.component';

bootstrapApplication(AppComponent, {
  providers: [
    {
      provide: GANTT_I18N_LOCALE_TOKEN,
      useValue: customZhHans,
      multi: true
    }
  ]
}).catch(err => console.error(err));
```

## 常见问题

### Q: 如何只覆盖部分视图的文本？

**A:** 使用展开运算符先展开原有的所有视图，然后只覆盖需要的部分：

```typescript
import { GanttI18nLocaleConfig, GanttI18nLocale, GanttViewType, zhHansLocale } from '@worktile/gantt';

const partialLocale: GanttI18nLocaleConfig = {
  id: GanttI18nLocale.zhHans,
  views: {
    ...zhHansLocale.views, // 先展开原有的所有视图
    [GanttViewType.day]: {
      // 然后覆盖需要的部分
      label: '自定义日视图',
      tickFormats: {
        period: 'yyyy-MM',
        unit: 'dd'
      }
    }
    // 其他视图使用默认值（通过展开运算符保留）
  }
};
```

### Q: dateLocale 是必需的吗？

**A:** 不是必需的，但建议提供以确保日期格式化正确。

### Q: 格式字符串不生效或显示异常？

**A:** `tickFormats` 中的格式字符串必须符合 `date-fns` 的格式规范。如果格式不正确，请参考 [date-fns format 文档](https://date-fns.org/docs/format) 检查格式字符串是否正确。

## 相关链接

- [全局配置](guides/configuration) - 了解如何配置语言
- [视图体系](guides/core-concepts/views) - 了解视图的显示
- [date-fns 文档](https://date-fns.org/docs/format) - 了解日期格式字符串
